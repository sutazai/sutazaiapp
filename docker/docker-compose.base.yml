version: '3.8'
networks:
  sutazai-base-network:
    driver: bridge
services:
  python-agent-master:
    build:
      context: .
      dockerfile: docker/base/Dockerfile.python-agent-master
      args:
        PYTHON_VERSION: 3.12.8
    image: sutazai-python-agent-master:v1.0.0
    container_name: sutazai-python-base-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 128M
  nodejs-agent-master:
    build:
      context: .
      dockerfile: docker/base/Dockerfile.nodejs-agent-master
      args:
        NODE_VERSION: 18
    image: sutazai-nodejs-agent-master:v1.0.0
    container_name: sutazai-nodejs-base-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 128M
  python-alpine-optimized:
    build:
      context: .
      dockerfile: docker/base/Dockerfile.python-alpine-optimized
      args:
        PYTHON_VERSION: 3.12.8
        ALPINE_VERSION: 3.19
    image: sutazai-python-alpine-optimized:v1.0.0
    container_name: sutazai-python-alpine-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 128M
  ai-ml-gpu-base:
    build:
      context: .
      dockerfile: docker/templates/Dockerfile.ai-ml-service-base
      args:
        ENABLE_GPU: 'true'
        CUDA_VERSION: 12.1
        PYTHON_VERSION: 3.12.8
    image: sutazai-ai-ml-gpu:v1.0.0
    container_name: sutazai-gpu-base-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        reservations:
          devices:
          - driver: nvidia
            count: all
            capabilities:
            - gpu
  ai-ml-cpu-base:
    build:
      context: .
      dockerfile: docker/templates/Dockerfile.ai-ml-service-base
      args:
        ENABLE_GPU: 'false'
        PYTHON_VERSION: 3.12.8
    image: sutazai-ai-ml-cpu:v1.0.0
    container_name: sutazai-cpu-base-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 128M
  golang-service-base:
    build:
      context: .
      dockerfile: docker/base/Dockerfile.golang-base
      args:
        GO_VERSION: 1.21
    image: sutazai-golang-base:v1.0.0
    container_name: sutazai-golang-base-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 128M
  monitoring-base:
    build:
      context: .
      dockerfile: docker/base/Dockerfile.monitoring-base
    image: sutazai-monitoring-base:v1.0.0
    container_name: sutazai-monitoring-base-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 128M
  python-agent:
    build:
      context: .
      dockerfile: docker/base/Dockerfile.python-agent
      args:
        PYTHON_VERSION: 3.12.8
    image: sutazai-python-agent:v1.0.0
    container_name: sutazai-base-builder
    networks:
    - sutazai-base-network
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 128M
volumes:
  base_build_cache:
    driver: local
