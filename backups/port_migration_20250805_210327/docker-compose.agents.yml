version: '3.8'

networks:
  sutazai:
    external: true

services:
  # Core Agent Services (already ready)
  ai-system-architect:
    build:
      context: ./agents/ai-system-architect
      dockerfile: Dockerfile
    container_name: sutazai-ai-system-architect
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-system-architect
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/1
      - LOG_LEVEL=INFO
    ports:
      - "8001:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  hardware-resource-optimizer:
    build:
      context: ./agents/hardware-resource-optimizer
      dockerfile: Dockerfile
    container_name: sutazai-hardware-resource-optimizer
    restart: unless-stopped
    environment:
      - AGENT_NAME=hardware-resource-optimizer
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/2
      - LOG_LEVEL=INFO
    ports:
      - "8002:8080"
    volumes:
      - ./logs/agents:/app/logs
      - /var/run/docker.sock:/var/run/docker.sock:ro
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

  # Critical Agents (now fixed)
  ai-agent-orchestrator:
    build:
      context: ./agents/ai-agent-orchestrator
      dockerfile: Dockerfile
    container_name: sutazai-ai-agent-orchestrator
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-agent-orchestrator
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/3
      - LOG_LEVEL=INFO
    ports:
      - "8003:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  infrastructure-devops-manager:
    build:
      context: ./agents/infrastructure-devops-manager
      dockerfile: Dockerfile
    container_name: sutazai-infrastructure-devops-manager
    restart: unless-stopped
    environment:
      - AGENT_NAME=infrastructure-devops-manager
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/4
      - LOG_LEVEL=INFO
    ports:
      - "8004:8080"
    volumes:
      - ./logs/agents:/app/logs
      - /var/run/docker.sock:/var/run/docker.sock:ro
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

  deployment-automation-master:
    build:
      context: ./agents/deployment-automation-master
      dockerfile: Dockerfile
    container_name: sutazai-deployment-automation-master
    restart: unless-stopped
    environment:
      - AGENT_NAME=deployment-automation-master
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/5
      - LOG_LEVEL=INFO
    ports:
      - "8005:8080"
    volumes:
      - ./logs/agents:/app/logs
      - /var/run/docker.sock:/var/run/docker.sock:ro
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

  ollama-integration-specialist:
    build:
      context: ./agents/ollama-integration-specialist
      dockerfile: Dockerfile
    container_name: sutazai-ollama-integration-specialist
    restart: unless-stopped
    environment:
      - AGENT_NAME=ollama-integration-specialist
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/6
      - LOG_LEVEL=INFO
    ports:
      - "8006:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  senior-ai-engineer:
    build:
      context: ./agents/senior-ai-engineer
      dockerfile: Dockerfile
    container_name: sutazai-senior-ai-engineer
    restart: unless-stopped
    environment:
      - AGENT_NAME=senior-ai-engineer
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/7
      - LOG_LEVEL=INFO
    ports:
      - "8007:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  testing-qa-validator:
    build:
      context: ./agents/testing-qa-validator
      dockerfile: Dockerfile
    container_name: sutazai-testing-qa-validator
    restart: unless-stopped
    environment:
      - AGENT_NAME=testing-qa-validator
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/8
      - LOG_LEVEL=INFO
    ports:
      - "8008:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  agent-creator:
    build:
      context: ./agents/agent-creator
      dockerfile: Dockerfile
    container_name: sutazai-agent-creator
    restart: unless-stopped
    environment:
      - AGENT_NAME=agent-creator
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/9
      - LOG_LEVEL=INFO
    ports:
      - "8009:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  agent-debugger:
    build:
      context: ./agents/agent-debugger
      dockerfile: Dockerfile
    container_name: sutazai-agent-debugger
    restart: unless-stopped
    environment:
      - AGENT_NAME=agent-debugger
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/10
      - LOG_LEVEL=INFO
    ports:
      - "8010:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  agent-orchestrator:
    build:
      context: ./agents/agent-orchestrator
      dockerfile: Dockerfile
    container_name: sutazai-agent-orchestrator
    restart: unless-stopped
    environment:
      - AGENT_NAME=agent-orchestrator
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/11
      - LOG_LEVEL=INFO
    ports:
      - "8011:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  ai-senior-backend-developer:
    build:
      context: ./agents/ai-senior-backend-developer
      dockerfile: Dockerfile
    container_name: sutazai-ai-senior-backend-developer
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-senior-backend-developer
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/12
      - LOG_LEVEL=INFO
    ports:
      - "8012:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  ai-senior-engineer:
    build:
      context: ./agents/ai-senior-engineer
      dockerfile: Dockerfile
    container_name: sutazai-ai-senior-engineer
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-senior-engineer
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/13
      - LOG_LEVEL=INFO
    ports:
      - "8013:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  ai-senior-frontend-developer:
    build:
      context: ./agents/ai-senior-frontend-developer
      dockerfile: Dockerfile
    container_name: sutazai-ai-senior-frontend-developer
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-senior-frontend-developer
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/14
      - LOG_LEVEL=INFO
    ports:
      - "8014:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  ai-senior-full-stack-developer:
    build:
      context: ./agents/ai-senior-full-stack-developer
      dockerfile: Dockerfile
    container_name: sutazai-ai-senior-full-stack-developer
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-senior-full-stack-developer
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/15
      - LOG_LEVEL=INFO
    ports:
      - "8015:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  ai-system-validator:
    build:
      context: ./agents/ai-system-validator
      dockerfile: Dockerfile
    container_name: sutazai-ai-system-validator
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-system-validator
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/16
      - LOG_LEVEL=INFO
    ports:
      - "8016:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  ai-testing-qa-validator:
    build:
      context: ./agents/ai-testing-qa-validator
      dockerfile: Dockerfile
    container_name: sutazai-ai-testing-qa-validator
    restart: unless-stopped
    environment:
      - AGENT_NAME=ai-testing-qa-validator
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/17
      - LOG_LEVEL=INFO
    ports:
      - "8017:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

  container-orchestrator-k3s:
    build:
      context: ./agents/container-orchestrator-k3s
      dockerfile: Dockerfile
    container_name: sutazai-container-orchestrator-k3s
    restart: unless-stopped
    environment:
      - AGENT_NAME=container-orchestrator-k3s
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/18
      - LOG_LEVEL=INFO
    ports:
      - "8018:8080"
    volumes:
      - ./logs/agents:/app/logs
      - /var/run/docker.sock:/var/run/docker.sock:ro
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

  kali-hacker:
    build:
      context: ./agents/kali-hacker
      dockerfile: Dockerfile
    container_name: sutazai-kali-hacker
    restart: unless-stopped
    environment:
      - AGENT_NAME=kali-hacker
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/19
      - LOG_LEVEL=INFO
    ports:
      - "8019:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

  mega-code-auditor:
    build:
      context: ./agents/mega-code-auditor
      dockerfile: Dockerfile
    container_name: sutazai-mega-code-auditor
    restart: unless-stopped
    environment:
      - AGENT_NAME=mega-code-auditor
      - OLLAMA_URL=http://ollama:11434
      - BACKEND_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/20
      - LOG_LEVEL=INFO
    ports:
      - "8020:8080"
    volumes:
      - ./logs/agents:/app/logs
    depends_on:
      - sutazai-backend
      - sutazai-ollama
      - sutazai-redis
    networks:
      - sutazai
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

