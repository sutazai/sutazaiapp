{
  "test_suite": "Final Bulletproof Test Suite",
  "timestamp": "2025-08-04T19:03:00.002525",
  "duration_seconds": 16.98,
  "total_tests": 8,
  "passed": 6,
  "failed": 2,
  "pass_rate": "75.0%",
  "overall_status": "FAIL",
  "under_30_seconds": true,
  "agent_responsive": true,
  "test_results": [
    {
      "test": "agent_connectivity",
      "status": "PASS",
      "validations": {
        "agent_responds": true,
        "health_status": true,
        "has_agent_info": true,
        "system_data_present": true
      },
      "agent_data": {
        "status": "healthy",
        "agent": "hardware-resource-optimizer",
        "description": "On-demand hardware resource optimization and cleanup tool",
        "docker_available": true,
        "system_status": {
          "cpu_percent": 5.9,
          "memory_percent": 23.7,
          "disk_percent": 20.468569841764882,
          "memory_available_gb": 22.403133392333984,
          "disk_free_gb": 749.5497093200684,
          "timestamp": 1754326964.0271902
        },
        "timestamp": 1754326964.027209
      }
    },
    {
      "test": "basic_optimization",
      "status": "PASS",
      "validations": {
        "memory_optimization_works": true,
        "cache_cleanup_works": true,
        "memory_returns_actions": true,
        "cache_returns_actions": true
      },
      "memory_result": {
        "status": "success",
        "optimization_type": "memory",
        "actions_taken": [
          "Python garbage collection freed 241 objects"
        ],
        "initial_memory_percent": 23.7,
        "final_memory_percent": 23.7,
        "memory_freed_mb": 0.0,
        "timestamp": 1754326964.0484498
      },
      "cache_result": {
        "status": "success",
        "optimization_type": "cache",
        "actions_taken": [
          "Executed: sync",
          "Executed: apt-get clean",
          "Failed: find /home/*/.thumbnails -type f -delete - find: \u2018/home/*/.thumbnails\u2019: No such file or directory\n",
          "Failed: find /home/*/.cache/thumbnails -type f -delete - find: \u2018/home/*/.cache/thumbnails\u2019: No such file or directory\n"
        ],
        "timestamp": 1754326964.0734887
      }
    },
    {
      "test": "system_analysis",
      "status": "PASS",
      "validations": {
        "status_endpoint_works": true,
        "status_has_metrics": true,
        "storage_analysis_works": true,
        "storage_analysis_valid_response": true
      },
      "system_metrics": {
        "cpu_percent": 2.5,
        "memory_percent": 23.7,
        "disk_percent": 20.468569841764882,
        "memory_available_gb": 22.40052032470703,
        "disk_free_gb": 749.5497093200684,
        "timestamp": 1754326965.0764797
      },
      "storage_analysis": {
        "status": "success",
        "path": "/tmp",
        "total_files": 0,
        "total_size_bytes": 0,
        "total_size_mb": 0.0,
        "extension_breakdown": {},
        "size_distribution": {},
        "age_distribution": {},
        "timestamp": 1754326965.0790262
      }
    },
    {
      "test": "error_handling",
      "status": "PASS",
      "validations": {
        "all_errors_handled": true,
        "no_crashes": true,
        "appropriate_error_responses": true
      },
      "error_scenarios": [
        {
          "scenario": "invalid_endpoint",
          "handled_gracefully": true,
          "no_crash": true
        },
        {
          "scenario": "invalid_path",
          "handled_gracefully": true,
          "no_crash": true
        },
        {
          "scenario": "malformed_params",
          "handled_gracefully": true,
          "no_crash": true
        }
      ]
    },
    {
      "test": "performance",
      "status": "FAIL",
      "validations": {
        "all_endpoints_respond": true,
        "reasonable_response_times": true,
        "no_timeouts": true,
        "health_check_fast": false
      },
      "average_response_time": 0.6747732162475586,
      "response_times": [
        {
          "endpoint": "/health",
          "method": "GET",
          "duration": 1.0022916793823242,
          "success": true
        },
        {
          "endpoint": "/status",
          "method": "GET",
          "duration": 1.0030906200408936,
          "success": true
        },
        {
          "endpoint": "/optimize/memory",
          "method": "POST",
          "duration": 0.018937349319458008,
          "success": true
        }
      ],
      "successful_calls": 3
    },
    {
      "test": "concurrent_handling",
      "status": "FAIL",
      "validations": {
        "all_requests_completed": true,
        "no_concurrent_errors": true,
        "all_successful": true,
        "concurrent_performance_ok": false
      },
      "concurrent_requests": 3,
      "successful": 3,
      "errors": []
    },
    {
      "test": "optimization_effectiveness",
      "status": "PASS",
      "validations": {
        "comprehensive_optimization_works": true,
        "returns_optimization_results": true,
        "multiple_optimizations_performed": true,
        "system_metrics_stable": true,
        "actions_reported": true
      },
      "memory_before": 23.8,
      "memory_after": 23.7,
      "optimization_result": {
        "status": "success",
        "optimization_type": "all",
        "duration_seconds": 3.4544460773468018,
        "total_actions": 7,
        "actions_taken": [
          "Python garbage collection freed 28 objects",
          "No CPU optimization needed - no high-usage processes found",
          "Cleaned old files from /tmp",
          "Cleaned old files from /var/tmp",
          "Pruned 1 unused networks",
          "Could not prune build cache: 'APIClient' object has no attribute 'prune_build_cache'",
          "Cleaned cache: /var/cache"
        ],
        "detailed_results": {
          "memory": {
            "status": "success",
            "optimization_type": "memory",
            "actions_taken": [
              "Python garbage collection freed 28 objects"
            ],
            "initial_memory_percent": 23.8,
            "final_memory_percent": 23.8,
            "memory_freed_mb": 0.0,
            "timestamp": 1754326971.1398196
          },
          "cpu": {
            "status": "success",
            "optimization_type": "cpu",
            "actions_taken": [
              "No CPU optimization needed - no high-usage processes found"
            ],
            "initial_cpu_percent": 2.6,
            "processes_adjusted": 0,
            "timestamp": 1754326972.1409495
          },
          "disk": {
            "status": "success",
            "optimization_type": "disk",
            "actions_taken": [
              "Cleaned old files from /tmp",
              "Cleaned old files from /var/tmp"
            ],
            "initial_disk_percent": 20.468569841764882,
            "final_disk_percent": 20.468569841764882,
            "space_freed_mb": 0.0,
            "timestamp": 1754326972.1472347
          },
          "docker": {
            "status": "success",
            "optimization_type": "docker",
            "actions_taken": [
              "Pruned 1 unused networks",
              "Could not prune build cache: 'APIClient' object has no attribute 'prune_build_cache'"
            ],
            "containers_removed": 0,
            "images_removed": 0,
            "timestamp": 1754326972.5718381
          },
          "storage": {
            "status": "success",
            "optimization_type": "comprehensive_storage",
            "dry_run": false,
            "actions_taken": [
              "Cleaned cache: /var/cache"
            ],
            "estimated_space_freed_mb": 0.0,
            "actual_space_freed_mb": 0.0,
            "initial_disk_percent": 20.468569841764882,
            "final_disk_percent": 20.468569841764882,
            "timestamp": 1754326972.5751603
          }
        },
        "before": {
          "cpu_percent": 3.7,
          "memory_percent": 23.8,
          "disk_percent": 20.468569841764882,
          "memory_available_gb": 22.397335052490234,
          "disk_free_gb": 749.5497093200684,
          "timestamp": 1754326971.121878
        },
        "after": {
          "cpu_percent": 4.8,
          "memory_percent": 23.7,
          "disk_percent": 20.468570599510798,
          "memory_available_gb": 22.407299041748047,
          "disk_free_gb": 749.5497016906738,
          "timestamp": 1754326973.5756395
        },
        "timestamp": 1754326973.5756419
      }
    },
    {
      "test": "api_completeness",
      "status": "PASS",
      "validations": {
        "all_core_endpoints_available": true,
        "health_endpoint_works": true,
        "status_endpoint_works": true,
        "optimization_endpoints_work": true,
        "analysis_endpoints_work": true
      },
      "total_endpoints_tested": 6,
      "available_endpoints": 6,
      "endpoint_results": [
        {
          "endpoint": "GET /health",
          "available": true,
          "response": {
            "status": "healthy",
            "agent": "hardware-resource-optimizer",
            "description": "On-demand hardware resource optimization and cleanup tool",
            "docker_available": true,
            "system_status": {
              "cpu_percent": 1.6,
              "memory_percent": 23.7,
              "disk_percent": 20.468570599510798,
              "memory_available_gb": 22.40119171142578,
              "disk_free_gb": 749.5497016906738,
              "timestamp": 1754326975.5810237
            },
            "timestamp": 1754326975.5810275
          }
        },
        {
          "endpoint": "GET /status",
          "available": true,
          "response": {
            "cpu_percent": 3.0,
            "memory_percent": 23.8,
            "disk_percent": 20.468570978383756,
            "memory_available_gb": 22.388256072998047,
            "disk_free_gb": 749.5496978759766,
            "timestamp": 1754326976.5842855
          }
        },
        {
          "endpoint": "POST /optimize/memory",
          "available": true,
          "response": {
            "status": "success",
            "optimization_type": "memory",
            "actions_taken": [
              "Python garbage collection freed 19 objects"
            ],
            "initial_memory_percent": 23.8,
            "final_memory_percent": 23.7,
            "memory_freed_mb": 12.52734375,
            "timestamp": 1754326976.6192753
          }
        },
        {
          "endpoint": "POST /optimize/storage/cache",
          "available": true,
          "response": {
            "status": "success",
            "optimization_type": "cache",
            "actions_taken": [
              "Executed: sync",
              "Executed: apt-get clean",
              "Failed: find /home/*/.thumbnails -type f -delete - find: \u2018/home/*/.thumbnails\u2019: No such file or directory\n",
              "Failed: find /home/*/.cache/thumbnails -type f -delete - find: \u2018/home/*/.cache/thumbnails\u2019: No such file or directory\n"
            ],
            "timestamp": 1754326976.642733
          }
        },
        {
          "endpoint": "GET /analyze/storage",
          "available": true,
          "response": {
            "status": "success",
            "path": "/tmp",
            "total_files": 0,
            "total_size_bytes": 0,
            "total_size_mb": 0.0,
            "extension_breakdown": {},
            "size_distribution": {},
            "age_distribution": {},
            "timestamp": 1754326976.6464355
          }
        },
        {
          "endpoint": "POST /optimize/all",
          "available": true,
          "response": {
            "status": "success",
            "optimization_type": "all",
            "duration_seconds": 3.3515474796295166,
            "total_actions": 6,
            "actions_taken": [
              "Python garbage collection freed 19 objects",
              "No CPU optimization needed - no high-usage processes found",
              "Cleaned old files from /tmp",
              "Cleaned old files from /var/tmp",
              "Could not prune build cache: 'APIClient' object has no attribute 'prune_build_cache'",
              "Cleaned cache: /var/cache"
            ],
            "detailed_results": {
              "memory": {
                "status": "success",
                "optimization_type": "memory",
                "actions_taken": [
                  "Python garbage collection freed 19 objects"
                ],
                "initial_memory_percent": 23.7,
                "final_memory_percent": 23.7,
                "memory_freed_mb": 0.0,
                "timestamp": 1754326977.6709616
              },
              "cpu": {
                "status": "success",
                "optimization_type": "cpu",
                "actions_taken": [
                  "No CPU optimization needed - no high-usage processes found"
                ],
                "initial_cpu_percent": 1.7,
                "processes_adjusted": 0,
                "timestamp": 1754326978.671713
              },
              "disk": {
                "status": "success",
                "optimization_type": "disk",
                "actions_taken": [
                  "Cleaned old files from /tmp",
                  "Cleaned old files from /var/tmp"
                ],
                "initial_disk_percent": 20.468570599510798,
                "final_disk_percent": 20.468570599510798,
                "space_freed_mb": 0.0,
                "timestamp": 1754326978.6775389
              },
              "docker": {
                "status": "success",
                "optimization_type": "docker",
                "actions_taken": [
                  "Could not prune build cache: 'APIClient' object has no attribute 'prune_build_cache'"
                ],
                "containers_removed": 0,
                "images_removed": 0,
                "timestamp": 1754326978.9967604
              },
              "storage": {
                "status": "success",
                "optimization_type": "comprehensive_storage",
                "dry_run": false,
                "actions_taken": [
                  "Cleaned cache: /var/cache"
                ],
                "estimated_space_freed_mb": 0.0,
                "actual_space_freed_mb": 0.0,
                "initial_disk_percent": 20.468570599510798,
                "final_disk_percent": 20.468570599510798,
                "timestamp": 1754326979.0001006
              }
            },
            "before": {
              "cpu_percent": 3.8,
              "memory_percent": 23.7,
              "disk_percent": 20.468570599510798,
              "memory_available_gb": 22.415260314941406,
              "disk_free_gb": 749.5497016906738,
              "timestamp": 1754326977.6500328
            },
            "after": {
              "cpu_percent": 2.1,
              "memory_percent": 23.7,
              "disk_percent": 20.468570599510798,
              "memory_available_gb": 22.414661407470703,
              "disk_free_gb": 749.5497016906738,
              "timestamp": 1754326980.000938
            },
            "timestamp": 1754326980.0009418
          }
        }
      ]
    }
  ]
}