#!/usr/bin/envpython3importsysimportjsonfromdatetimeimportdatetimeCHAT_HISTORY_FILE="chat_history.json"defprocess_chat_message(message):"""Processandstoreasinglechatmessage."""timestamp=datetime.now().isoformat()chat_entry={"timestamp":timestamp,"message":message.strip()}#Loadexistingchathistorytry:withopen(CHAT_HISTORY_FILE,"r")asf:chat_history=json.load(f)exceptFileNotFoundError:chat_history=[]#Addnewentrychat_history.append(chat_entry)#Saveupdatedhistorywithopen(CHAT_HISTORY_FILE,"w")asf:json.dump(chat_history,f,indent=2)print(f"Processedchat:{message.strip()}")defmain():"""Mainfunctiontoprocesschatmessagesfromstdin."""forlineinsys.stdin:process_chat_message(line)if__name__=="__main__":main()
