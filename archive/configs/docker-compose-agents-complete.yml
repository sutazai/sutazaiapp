version: '3.9'

networks:
  sutazai-network:
    external: true

services:
  autogpt:
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.autogpt
    container_name: sutazai-autogpt
    restart: unless-stopped
    environment:
      - OPENAI_API_BASE=http://ollama:11434/v1
      - OPENAI_API_KEY=local
    volumes:
      - ./agents/workspaces/autogpt:/workspace
    networks:
      - sutazai-network
    depends_on:
      - ollama

  crewai:
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.crewai
    container_name: sutazai-crewai
    restart: unless-stopped
    ports:
      - "8502:8502"
    networks:
      - sutazai-network
    depends_on:
      - ollama

  # LocalAGI service removed
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.localagi
    container_name: sutazai-localagi
    restart: unless-stopped
    ports:
      - "8503:8080"
    volumes:
      - ./models:/models
    networks:
      - sutazai-network

  tabbyml:
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.tabbyml
    container_name: sutazai-tabbyml
    restart: unless-stopped
    ports:
      - "8080:8080"
    networks:
      - sutazai-network

  semgrep:
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.semgrep
    container_name: sutazai-semgrep
    restart: unless-stopped
    ports:
      - "8504:8504"
    networks:
      - sutazai-network

  langchain:
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.langchain
    container_name: sutazai-langchain
    restart: unless-stopped
    ports:
      - "8505:8505"
    networks:
      - sutazai-network
    depends_on:
      - ollama

  gpt-engineer:
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.gpt-engineer
    container_name: sutazai-gpt-engineer
    restart: unless-stopped
    ports:
      - "8506:8506"
    volumes:
      - ./agents/workspaces/gpt-engineer:/workspace
    networks:
      - sutazai-network
    depends_on:
      - ollama

  aider:
    build:
      context: ./agents
      dockerfile: dockerfiles/Dockerfile.aider
    container_name: sutazai-aider
    restart: unless-stopped
    ports:
      - "8507:8507"
    volumes:
      - ./agents/workspaces/aider:/workspace
    networks:
      - sutazai-network
    depends_on:
      - ollama
