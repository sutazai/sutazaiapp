groups:
  # Business Performance Metrics
  - name: business_performance
    rules:
    - alert: LowTaskCompletionRate
      expr: task_completion_rate < 0.8
      for: 30m
      labels:
        severity: warning
        component: business
      annotations:
        summary: "Low task completion rate"
        description: "Task completion rate is below 80%"

    - alert: UserEngagementDrop
      expr: avg_over_time(active_users[1h]) < 0.7 * avg_over_time(active_users[1h] offset 1d)
      for: 1h
      labels:
        severity: warning
        component: business
      annotations:
        summary: "User engagement drop"
        description: "Active users are 30% below yesterday's average"

    - alert: AIAssistantUsageDrop
      expr: rate(ai_assistant_requests_total[1h]) < 0.5 * rate(ai_assistant_requests_total[1h] offset 1d)
      for: 2h
      labels:
        severity: warning
        component: business
      annotations:
        summary: "AI assistant usage drop"
        description: "AI assistant usage is 50% below normal"

    - alert: HighTaskFailureRate
      expr: rate(task_failures_total[30m]) / rate(task_attempts_total[30m]) > 0.15
      for: 30m
      labels:
        severity: critical
        component: business
      annotations:
        summary: "High task failure rate"
        description: "Task failure rate is above 15%"

  # Agent Performance Metrics
  - name: agent_performance
    rules:
    - alert: AgentProductivityDrop
      expr: agent_tasks_completed_per_hour < 0.7 * avg_over_time(agent_tasks_completed_per_hour[24h])
      for: 2h
      labels:
        severity: warning
        component: business
      annotations:
        summary: "Agent productivity drop"
        description: "Agent {{ $labels.agent_name }} productivity is 30% below average"

    - alert: AgentCollaborationIssues
      expr: agent_collaboration_success_rate < 0.8
      for: 1h
      labels:
        severity: warning
        component: business
      annotations:
        summary: "Agent collaboration issues"
        description: "Agent collaboration success rate below 80%"

    - alert: AutonomousOperationDegradation
      expr: autonomous_operation_score < 0.75
      for: 30m
      labels:
        severity: warning
        component: business
      annotations:
        summary: "Autonomous operation degradation"
        description: "Autonomous operation score below 75%"

  # Cost and Resource Efficiency
  - name: cost_efficiency
    rules:
    - alert: HighInferenceCost
      expr: ai_inference_cost_per_hour > 50
      for: 1h
      labels:
        severity: warning
        component: cost
      annotations:
        summary: "High AI inference cost"
        description: "AI inference cost is above $50/hour"

    - alert: ResourceWaste
      expr: resource_utilization_efficiency < 0.6
      for: 2h
      labels:
        severity: warning
        component: cost
      annotations:
        summary: "Low resource efficiency"
        description: "Resource utilization efficiency below 60%"

    - alert: ModelComputeOverage
      expr: model_compute_hours > model_compute_budget
      for: 1m
      labels:
        severity: critical
        component: cost
      annotations:
        summary: "Model compute budget exceeded"
        description: "AI model compute usage has exceeded allocated budget"

  # Quality Metrics
  - name: quality_metrics
    rules:
    - alert: OutputQualityDegradation
      expr: output_quality_score < 0.8
      for: 20m
      labels:
        severity: warning
        component: quality
      annotations:
        summary: "Output quality degradation"
        description: "AI output quality score below 80%"

    - alert: UserSatisfactionDrop
      expr: user_satisfaction_score < 3.5
      for: 1h
      labels:
        severity: warning
        component: quality
      annotations:
        summary: "User satisfaction drop"
        description: "User satisfaction score below 3.5/5"

    - alert: ModelHallucinationIncrease
      expr: rate(model_hallucination_incidents[1h]) > 0.05
      for: 30m
      labels:
        severity: critical
        component: quality
      annotations:
        summary: "High model hallucination rate"
        description: "Model hallucination rate above 5%"

  # Data Pipeline Health
  - name: data_pipeline
    rules:
    - alert: DataIngestionLag
      expr: data_ingestion_lag_minutes > 60
      for: 15m
      labels:
        severity: warning
        component: data
      annotations:
        summary: "Data ingestion lag"
        description: "Data ingestion is lagging by more than 60 minutes"

    - alert: DataQualityIssues
      expr: data_quality_score < 0.9
      for: 30m
      labels:
        severity: warning
        component: data
      annotations:
        summary: "Data quality issues detected"
        description: "Data quality score below 90%"

    - alert: TrainingDataDrift
      expr: training_data_drift_score > 0.3
      for: 1h
      labels:
        severity: warning
        component: data
      annotations:
        summary: "Training data drift detected"
        description: "Training data drift score above threshold"

  # System Intelligence Metrics
  - name: system_intelligence
    rules:
    - alert: SystemLearningStagnation
      expr: learning_progress_rate < 0.01
      for: 6h
      labels:
        severity: warning
        component: intelligence
      annotations:
        summary: "System learning stagnation"
        description: "System learning progress rate below 1%"

    - alert: AdaptabilityScore Low
      expr: system_adaptability_score < 0.7
      for: 2h
      labels:
        severity: warning
        component: intelligence
      annotations:
        summary: "Low system adaptability"
        description: "System adaptability score below 70%"

    - alert: EmergentBehaviorAnomaly
      expr: emergent_behavior_anomaly_score > 0.8
      for: 30m
      labels:
        severity: critical
        component: intelligence
      annotations:
        summary: "Emergent behavior anomaly detected"
        description: "Unusual emergent behavior pattern detected"